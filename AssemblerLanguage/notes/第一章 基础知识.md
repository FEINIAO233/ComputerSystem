# 第一章 基础知识

### 1. 范围（广义）

1. 指令系统 
   机器语言，还包括机器字长、内存地址模式、处理器寄存器等程序员可见的系统状态、数据格式等。
2. 微体系架构
   如何实现指令集。处理器内部的实现，包括流水线，处理部件，缓存等内容。
3. 计算机系统
   计算机系统里的其他硬件，包括总线、交换开关（Switch）、内存控制器、DMA控制器等。
4. 其他内容
   虚拟化、计算机集群等等。

#### 1.1. 指令系统

- 计算机处理器对外提供的主要接口与规格
- 软硬件的分界
- 系统程序员看到的计算机的主要属性

## 2. 指令集

### 2.1. CISC指令集—x86指令集

#### 2.1.1. 基本特色

- 向下兼容
- 变长指令 1-15字节，多数为2-3字节长度
- 多种寻址方式（可访问不对齐内存地址）
- 指令集的通用寄存器个数有限（x86-32系统下拥有8个通用寄存器 x86-64扩展到16个）
- 至多能有一个操作数在内存中，另一个操作数为立即数或者寄存器

#### 2.1.2. 缺点

- 向下兼容导致指令集越来越大、越复杂
- 类RISC内核，采用micro-op模式进行翻译，使得功耗相对增大，这导致其在注重低功耗的领域不易占优势
- 对很多领域而言，资源利用率低

### 2.2. RISC指令集—MIPS指令集

#### 2.2.1. 经典的RISC指令集

- MIPS I、MIPS II、MIPS III、MIPS IV到MIPS V，嵌入式指令体系MIPS16、MIPS32到MIPS64的发展已经十分成熟。
- 为充分利用处理器的流水线结构，其设计思想是使得各个指令的流水线分段较为均匀（分段一致，每段的操作时延相差不多，以提高主频）
- 尽量利用软件办法避免流水线中的数据相关/控制相关问题
- 以寄存器为中心（32个），只有Load/Store指令访问内存，所有的计算类型的指令均从寄存器堆中读取数据并把结果写入寄存器堆中（MIPS32还定义了32个浮点寄存器）
- MIPS32指令集的指令格式非常规整，所有的指令长度一定，而且指令操作码在固定的位置上。
- MIPS指令的寻址方式非常简单，每条指令的操作也较为简单

#### 2.2.2. MIPS32的指令格式只有3种

- R（register)类型的指令从寄存器堆种读取两个源操作数，计算结果写会寄存器堆。
- I（immediate）类型的指令使用一个16位的立即数作为源操作数。
- J（jump）类型的指令使用一个26位立即数作为跳转的目标地址（target address）。

#### 2.2.3. ARM指令集

- 大多数指令具有__条件执行__模式。
- 具有16位压缩指令集

## 3. 小结

- CISC与RISC指令集互为借鉴，走向融合
- ARM博取众长，成功并不偶然
- 兼容性考虑是指令集发展的关键性因素

